# manufacturing-quantify
manufacturing quantify for game

一个用于用来量化游戏产物达到目标产量需要的工厂数量以及中间产物需要的工厂数量的工具。

这个工具是我在玩《异星工厂》(factorio)时建生产线感到每次都要算工厂要建几个非常麻烦时决定顺手写个工具。
目前因为数据库不完整，没法算所有的产物，不过代码逻辑在数据库数据充足的情况下是能工作的。
数据库放在`databases`目录下面它会随着我的游戏进度逐渐完善。

这个工具的实现原理是：
1. 计算输出产物`Pn`的产量和每个需求产物`Rm`的每秒钟的生产和需求速度(`v(Pn),v(Rm)`)。
2. 计算产物需要的工厂数量：f(Pn)=factory_factor/v(Pn)。
3. 其中factory_factor `ff(Pn)` 是工厂倍率，以每秒生产一个其值为1。例如如果要算每分钟蓝瓶60个的工厂数量那工厂倍率`ff(Pm)=1*60s/60=1`
4. 将f(Pn)累加到全局产物工厂计数器中
5. 如果产物有需求产物`R(m)`，那么计算出`R(m)`的工厂倍率 `ff(Rm)=f(Pn)*v(Rm)`
6. 对每个需求产物作为输出产物`Pm->Rm`，按`ff(Pn)->ff(Rm)`递归计算需求产物需要的工厂数量

最后递归结束后即可得到输出产物达到单位时间产能需要的所有工厂的数量。